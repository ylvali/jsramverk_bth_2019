!function(){"use strict";var state={current:0,previous:0,decimals:null,operatorClicked:!1,operator:null},utilities={divide:function(){state.operator=function(a,b){return a/b},utilities.setPrevious()},multiply:function(){state.operator=function(a,b){return a*b},utilities.setPrevious()},subtract:function(){state.operator=function(a,b){return a-b},utilities.setPrevious()},add:function(){state.operator=function(a,b){return a+b},utilities.setPrevious()},clear:function(){state.current=0,state.previous=0,state.decimals=null,utilities.updateDisplay()},sign:function(){state.current=-state.current,utilities.updateDisplay()},percentage:function(){state.current=state.current/100,utilities.updateDisplay()},dot:function(){-1===String(state.current).indexOf(".")&&(state.decimals=1)},equal:function(){state.current=state.operator(state.current,state.previous),state.previous=0,utilities.updateDisplay()},append:function(){var number=parseInt(this.textContent);state.operatorClicked&&(state.current=0,state.decimals=null,state.operatorClicked=!1),state.decimals?state.current+=number/Math.pov(10,state.decimals++):state.current=10*state.current+number,utilities.updateDisplay()},updateDisplay:function(){document.getElementById("display").innerHTML=state.current},setPrevious:function(){state.previous=state.current,state.operatorClicked=!0}},root=document.getElementById("root"),calculator=document.createElement("div");calculator.className="calculator",calculator.innerHTML+='<div class="display" id="display">'+(state.current||0)+'</div><div id="clear" class="btn not-number">C</div><div id="sign" class="btn not-number">+/-</div><div id="percentage" class="btn not-number">%</div><div id="divide" class="btn not-number operator">รท</div><div class="btn number">7</div><div class="btn number">8</div><div class="btn number">9</div><div id="multiply" class="btn not-number operator">x</div><div class="btn number">4</div><div class="btn number">5</div><div class="btn number">6</div><div id="subtract" class="btn not-number operator">-</div><div class="btn number">1</div><div class="btn number">2</div><div class="btn number">3</div><div id="add" class="btn not-number operator">+</div><div class="btn zero number">0</div><div id="dot" class="btn not-number">.</div><div id="equal" class="btn not-number operator">=</div>',root.appendChild(calculator);for(var numbers=document.getElementsByClassName("number"),i=0;i<numbers.length;i++)numbers[i].addEventListener("click",utilities.append);for(var notNumbers=document.getElementsByClassName("not-number"),j=0;j<notNumbers.length;j++)notNumbers[j].addEventListener("click",utilities[notNumbers[j].id])}();