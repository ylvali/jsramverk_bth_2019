!function(){var state={history:[{squares:Array(9).fill(null)}],stepNumber:0,xIsNext:!0},root=document.getElementById("root"),app=document.createElement("App"),title=document.createElement("h1"),game=document.createElement("div"),gameBoard=document.createElement("div"),gameInfo=document.createElement("div"),nextPlayer=document.createElement("div"),historyButtons=document.createElement("div");app.className="App",title.textContent="tic-tac-toe",game.className="game",gameBoard.className="game-board",gameInfo.className="game-info",historyButtons.className="history-buttons";for(var i=0;i<3;i++){var boardRow=document.createElement("div");boardRow.className="board-row";for(var j=0;j<3;j++){var square=document.createElement("div");square.className="square",square.dataset.index=3*i+j,square.addEventListener("click",handleClick),boardRow.appendChild(square)}gameBoard.appendChild(boardRow)}function renderBoard(){var htmlSquares=document.getElementsByClassName("square");state.history[state.stepNumber].squares.map(function(item,index){htmlSquares[index].textContent=item})}function renderNextPlayer(winner){nextPlayer.textContent="Next player: "+(state.xIsNext?"X":"O"),winner&&(nextPlayer.textContent="Winner: "+winner)}function renderHistoryButtons(){for(var history=state.history;historyButtons.lastChild;)historyButtons.removeChild(historyButtons.lastChild);history.map(function(step,move){var desc=move?"Go to move #"+move:"Go to game start",button=document.createElement("button");button.textContent=desc,button.addEventListener("click",function(){!function(step){state.stepNumber=step,state.xIsNext=step%2==0;var history=state.history.slice(0,state.stepNumber+1),squares=history[history.length-1].squares.slice();renderBoard(),renderNextPlayer(calculateWinner(squares)),renderHistoryButtons()}(move)}),historyButtons.appendChild(button)})}function handleClick(){var square=this.dataset.index,history=state.history.slice(0,state.stepNumber+1),squares=history[history.length-1].squares.slice();calculateWinner(squares)||squares[square]?renderNextPlayer(calculateWinner(squares)):(squares[square]=state.xIsNext?"X":"O",state={history:history.concat([{squares:squares}]),stepNumber:history.length,xIsNext:!state.xIsNext},renderBoard(),renderNextPlayer(calculateWinner(squares)),renderHistoryButtons())}function calculateWinner(squares){for(var lines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],i=0;i<lines.length;i++){var a=lines[i][0],b=lines[i][1],c=lines[i][2];if(squares[a]&&squares[a]===squares[b]&&squares[a]===squares[c])return squares[a]}return null}game.appendChild(gameBoard),gameInfo.appendChild(nextPlayer),gameInfo.appendChild(historyButtons),game.appendChild(gameInfo),app.appendChild(title),app.appendChild(game),root.appendChild(app),renderNextPlayer(),renderHistoryButtons()}();